# üöÇ –î–µ–ø–ª–æ–π –Ω–∞ Railway - –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üèÜ –ü–æ—á–µ–º—É Railway?

- ‚úÖ **Persistent storage** –∏–∑ –∫–æ—Ä–æ–±–∫–∏ (–¥–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è!)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π –∏–∑ GitHub
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π PostgreSQL
- ‚úÖ $5 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤ (—Ö–≤–∞—Ç–∏—Ç –Ω–∞ –º–µ—Å—è—Ü)
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (10 –º–∏–Ω—É—Ç)

### –®–∞–≥ 1: Push –≤ GitHub (2 –º–∏–Ω—É—Ç—ã)

```bash
cd /Users/oleg/Downloads/–ú–∞—Ä—à—Ä—É—Ç—ã

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Git
git init
git add .
git commit -m "Initial commit"

# Push –≤ GitHub (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_USERNAME)
git remote add origin https://github.com/YOUR_USERNAME/bali-tours.git
git branch -M main
git push -u origin main
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Railway (3 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://railway.app
2. –ù–∞–∂–º–∏—Ç–µ **Login** ‚Üí –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub
3. –ù–∞–∂–º–∏—Ç–µ **New Project**
4. –í—ã–±–µ—Ä–∏—Ç–µ **Deploy from GitHub repo**
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `bali-tours`
6. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø–µ—Ä–≤—ã–π —Å–µ—Ä–≤–∏—Å

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Web —Å–µ—Ä–≤–∏—Å–∞ (2 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
3. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
APP_ROLE=web
ADMIN_TOKEN=–≤–∞—à_–±–µ–∑–æ–ø–∞—Å–Ω—ã–π_—Ç–æ–∫–µ–Ω_32_—Å–∏–º–≤–æ–ª–∞
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_botfather
ADMIN_CHAT_ID=–≤–∞—à_telegram_id
DB_PATH=/app/data/leads.db
```

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è ADMIN_TOKEN:
```bash
python3 -c "import secrets; print(secrets.token_urlsafe(32))"
```

4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Networking**
5. –ù–∞–∂–º–∏—Ç–µ **Generate Domain**
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `bali-tours-web.up.railway.app`)

### –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ Bot —Å–µ—Ä–≤–∏—Å–∞ (2 –º–∏–Ω—É—Ç—ã)

1. –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–∂–º–∏—Ç–µ **New** ‚Üí **GitHub Repo**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ç –∂–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `bali-tours`
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables**
4. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
APP_ROLE=bot
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_botfather
ADMIN_CHAT_ID=–≤–∞—à_telegram_id
WEB_APP_URL=https://–≤–∞—à-web-–¥–æ–º–µ–Ω.up.railway.app
BACKEND_URL=https://–≤–∞—à-web-–¥–æ–º–µ–Ω.up.railway.app
```

### –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Persistent Volume (1 –º–∏–Ω—É—Ç–∞)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Web —Å–µ—Ä–≤–∏—Å**
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Volumes**
3. –ù–∞–∂–º–∏—Ç–µ **New Volume**
4. Mount Path: `/app/data`
5. Size: 1 GB
6. –ù–∞–∂–º–∏—Ç–µ **Add**

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Mini App (2 –º–∏–Ω—É—Ç—ã)

1. –û—Ç–∫—Ä–æ–π—Ç–µ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
3. **Bot Settings** ‚Üí **Menu Button** ‚Üí **Configure Menu Button**
4. URL: `https://–≤–∞—à-web-–¥–æ–º–µ–Ω.up.railway.app`
5. –¢–µ–∫—Å—Ç: `–°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç`

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### Health Check
```bash
curl https://–≤–∞—à-–¥–æ–º–µ–Ω.up.railway.app/api/health
```

–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "ok": true,
  "database": "connected",
  "telegram": "configured"
}
```

### –ê–¥–º–∏–Ω–∫–∞
–û—Ç–∫—Ä–æ–π—Ç–µ: `https://–≤–∞—à-–¥–æ–º–µ–Ω.up.railway.app/admin`

### Telegram –±–æ—Ç
1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç"

---

## üóÑÔ∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ PostgreSQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –ó–∞—á–µ–º?
- –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ë–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å:

1. –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–∂–º–∏—Ç–µ **New** ‚Üí **Database** ‚Üí **Add PostgreSQL**
2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL`
3. –í **Web —Å–µ—Ä–≤–∏—Å–µ** –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   ```
   DATABASE_URL=${{Postgres.DATABASE_URL}}
   ```
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –¥—Ä–∞–π–≤–µ—Ä (–¥–æ–±–∞–≤—å—Ç–µ –≤ `requirements.txt`):
   ```
   psycopg2-binary==2.9.9
   ```
5. –°–¥–µ–ª–∞–π—Ç–µ commit –∏ push:
   ```bash
   git add requirements.txt
   git commit -m "Add PostgreSQL support"
   git push
   ```

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
4. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### –ú–µ—Ç—Ä–∏–∫–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Metrics**
3. –°–º–æ—Ç—Ä–∏—Ç–µ:
   - CPU Usage
   - Memory Usage
   - Network Traffic

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã:
- $5 –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –•–≤–∞—Ç–∏—Ç –Ω–∞ ~1 –º–µ—Å—è—Ü —Ä–∞–±–æ—Ç—ã

### –ü–æ—Å–ª–µ –∫—Ä–µ–¥–∏—Ç–æ–≤:
- ~$5-10/–º–µ—Å—è—Ü –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU/RAM/Network

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQLite –≤–º–µ—Å—Ç–æ PostgreSQL (—ç–∫–æ–Ω–æ–º–∏—è ~$5/–º–µ—Å)
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–¥ –¥–ª—è –º–µ–Ω—å—à–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ auto-sleep –¥–ª—è bot —Å–µ—Ä–≤–∏—Å–∞ (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω 24/7)

---

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ø–ª–æ–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –≤ GitHub:

```bash
# –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Update feature"
git push

# Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –û–±–Ω–∞—Ä—É–∂–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
# 2. –°–æ–±–µ—Ä–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
# 3. –ó–∞–¥–µ–ø–ª–æ–∏—Ç –±–µ–∑ downtime
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "Application failed to respond"
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `APP_ROLE` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π (Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `PORT`)

### –ü—Ä–æ–±–ª–µ–º–∞: "Database connection error"
**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Volume –ø–æ–¥–∫–ª—é—á–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å `DB_PATH=/app/data/leads.db`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ bot —Å–µ—Ä–≤–∏—Å–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `BOT_TOKEN` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `WEB_APP_URL` –¥–æ—Å—Ç—É–ø–µ–Ω
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –∑–∞–ø—É—â–µ–Ω—ã

### –ü—Ä–æ–±–ª–µ–º–∞: "Out of credits"
**–†–µ—à–µ–Ω–∏–µ**:
1. –î–æ–±–∞–≤—å—Ç–µ –ø–ª–∞—Ç–µ–∂–Ω—É—é –∫–∞—Ä—Ç—É –≤ Settings
2. –ò–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
3. –ò–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ –¥—Ä—É–≥—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Railway vs Render

| –§—É–Ω–∫—Ü–∏—è | Railway | Render Free |
|---------|---------|-------------|
| Persistent Storage | ‚úÖ –ò–∑ –∫–æ—Ä–æ–±–∫–∏ | ‚ùå –¢–æ–ª—å–∫–æ –≤ Starter |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –ù–µ —Ç–µ—Ä—è–µ—Ç—Å—è | ‚ùå –¢–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ |
| –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç | ‚úÖ –ë—ã—Å—Ç—Ä—ã–π | ‚ùå ~30 —Å–µ–∫—É–Ω–¥ |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π | ‚úÖ –î–∞ | ‚úÖ –î–∞ |
| PostgreSQL | ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π | ‚ùå –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å |
| –°—Ç–æ–∏–º–æ—Å—Ç—å | $5-10/–º–µ—Å | $0 (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏) |

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Custom Domain
1. Settings ‚Üí Domains
2. Add Custom Domain
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏

### Environment Groups
–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏:
1. Project Settings ‚Üí Shared Variables
2. –î–æ–±–∞–≤—å—Ç–µ –æ–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (BOT_TOKEN, ADMIN_CHAT_ID)

### Webhooks
–î–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –¥–µ–ø–ª–æ—è—Ö:
1. Settings ‚Üí Webhooks
2. –î–æ–±–∞–≤—å—Ç–µ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, Slack, Discord)

---

## üÜò –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

- Railway Docs: https://docs.railway.app
- Railway Discord: https://discord.gg/railway
- Railway Help: https://railway.app/help

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Railway —Å:
- ‚úÖ Persistent storage
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º HTTPS
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –¥–µ–ø–ª–æ–µ–º
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∏ –ª–æ–≥–∞–º–∏

–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–æ–π! üöÇ
