<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bali Route Builder</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="bg-shape bg-shape-1"></div>
    <div class="bg-shape bg-shape-2"></div>

    <main class="app">
      <header class="hero">
        <div class="panel-head row">
          <p class="badge" id="heroBadge">Создай свой уникальный маршрут</p>
          <div class="actions">
            <button id="langRuBtn" class="btn btn-ghost" type="button">RU</button>
            <button id="langEnBtn" class="btn btn-ghost" type="button">EN</button>
          </div>
        </div>
        <h1>Бали, Нуса Пенида, Ява</h1>
        <p class="lead" id="heroLead">
          Выберите лучшие локации, соберите тур мечты и получите незабываемое
          путешествие с комфортным трансфером, красивыми фото-точками и
          продуманным таймингом без лишней суеты.
        </p>
        <div class="hero-grid">
          <article class="hero-card">
            <h2>Базовая цена</h2>
            <p><strong>1 200 000 IDR</strong> за маршрут из 5 мест</p>
          </article>
          <article class="hero-card">
            <h2>Цена за машину</h2>
            <p>Стоимость делится на <strong>всех пассажиров</strong></p>
          </article>
          <article class="hero-card">
            <h2>Доплата</h2>
            <p><strong>+100 000 IDR</strong> за каждую точку после 5</p>
          </article>
        </div>
      </header>

      <section class="panel">
        <div class="steps" id="stepProgress">
          <div id="step1" class="step-item active">
            <span class="step-num">1</span>
            <span class="step-text">Формат</span>
          </div>
          <div id="step2" class="step-item">
            <span class="step-num">2</span>
            <span class="step-text">Локации</span>
          </div>
          <div id="step3" class="step-item">
            <span class="step-num">3</span>
            <span class="step-text">Контакты</span>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h2 id="formatStepTitle">Шаг 1. Выберите формат</h2>
        </div>
        <div class="mode-grid">
          <button id="chooseReadyMode" class="mode-btn" type="button">
            <span id="readyModeTitle">Готовые туры</span>
            <span id="readyModeDesc" class="small">Быстрый выбор готового сценария</span>
          </button>
          <button id="chooseCustomMode" class="mode-btn" type="button">
            <span id="customModeTitle">Собрать свой</span>
            <span id="customModeDesc" class="small">Категории -> локации -> ваш маршрут</span>
          </button>
        </div>
        <p id="modeHint" class="small"></p>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h2 id="addonsTitle">Допуслуги</h2>
        </div>
        <div class="addons-grid">
          <label class="addon-item">
            <input id="addonDrone" type="checkbox" />
            <span id="addonDroneText">Съемка на дрон (+200 000 IDR)</span>
          </label>
          <label class="addon-item">
            <input id="addonPortTransfer" type="checkbox" />
            <span id="addonPortTransferText">Трансфер в порт/из порта (+350 000 IDR)</span>
          </label>
        </div>
      </section>

      <section id="customBuilderSection" class="panel hidden">
        <div class="panel-head row">
          <h2>Шаг 2. Соберите свой тур</h2>
        </div>
        <p class="small">Выберите категории, затем добавьте подходящие локации.</p>
        <p id="catalogStatus" class="small"></p>
        <div id="categoryFilters" class="category-filters"></div>
        <div id="catalogCards" class="catalog-grid"></div>
      </section>

      <section id="readyRoutesSection" class="panel hidden">
        <div class="panel-head">
          <h2>Шаг 2. Выберите готовый маршрут</h2>
        </div>
        <div class="route-list">
          <article class="route-card">
            <h3>Тур 1: Секумпул и Северные жемчужины</h3>
            <p class="small">
              Sekumpul Waterfall -> Sekumpul View Point -> Aling-Aling -> Puncak Wanagiri -> Bali Handara Gate
            </p>
            <button id="addSekumpulRoute" class="btn btn-secondary" type="button">
              Выбрать Тур 1
            </button>
          </article>
          <article class="route-card">
            <h3>Тур 2: Убуд Классика</h3>
            <p class="small">
              Tegalalang -> Tirta Empul -> Gunung Kawi -> Taman Dedari -> Kanto Lampo
            </p>
            <button id="addUbudClassicRoute" class="btn btn-secondary" type="button">
              Выбрать Тур 2
            </button>
          </article>
          <article class="route-card">
            <h3>Тур 3: Кинтамани - вулканы и рассвет</h3>
            <p class="small">
              Pinggan Sunrise Point -> Mount Batur Viewpoint -> Batur Natural Hot Spring -> Paperhills -> Penglipuran Village
            </p>
            <button id="addKintamaniRoute" class="btn btn-secondary" type="button">
              Выбрать Тур 3
            </button>
          </article>
          <article class="route-card">
            <h3>Тур 4: Север Бали - озера и водопады</h3>
            <p class="small">
              Sekumpul -> Banyu Wana Amertha -> Puncak Wanagiri -> Bali Handara Gate -> Fresh Strawberry
            </p>
            <button id="addNorthSideRoute" class="btn btn-secondary" type="button">
              Выбрать Тур 4
            </button>
          </article>
          <article class="route-card">
            <h3>Тур 5: Восток Бали - храмы и океан</h3>
            <p class="small">
              Lempuyang -> Lahangan Sweet -> Tulamben -> Gembleng Waterfall -> Bali Chocolate Factory
            </p>
            <button id="addEastBaliRoute" class="btn btn-secondary" type="button">
              Выбрать Тур 5
            </button>
          </article>
          <article class="route-card">
            <h3>Тур 6: Иджен Экспресс (Ява)</h3>
            <p class="small">
              1911 Cafe & Resto -> Pondok Is Oke -> Pegunungan Ijen
            </p>
            <p class="small">
              Цена тура: 4 500 000 IDR + респиратор 50 000 + отель 125 000 + билеты 135 000
            </p>
            <button id="addIjenRoute" class="btn btn-secondary" type="button">
              Выбрать Тур 6
            </button>
          </article>
          <article class="route-card">
            <h3>Тур 7: Ява Гранд Тур - Иджен + Бромо + 2 водопада</h3>
            <p class="small">
              1911 Cafe & Resto -> Pondok Is Oke -> Pegunungan Ijen -> Kawah Gunung Bromo -> Bromo Escapes -> Tumpak Sewu -> Air Terjun Kabut Pelangi
            </p>
            <p class="small">
              Цена тура: 6 500 000 IDR + джипы 100 000 + 2 отеля 300 000 + респиратор 50 000 + билет Иджен 135 000 + справки о здоровье 15 000
            </p>
            <button id="addJavaGrandRoute" class="btn btn-secondary" type="button">
              Выбрать Тур 7
            </button>
          </article>
        </div>
      </section>

      <section class="panel">
        <div class="panel-head row">
          <h2>Маршрут клиента</h2>
          <div class="actions">
            <button id="clearAll" class="btn btn-danger" type="button">
              Очистить
            </button>
          </div>
        </div>
        <p id="selectedCountInfo" class="small"></p>
        <div id="places" class="cards"></div>
      </section>

      <section class="panel total">
        <div class="panel-head">
          <h2>Итог по маршруту</h2>
        </div>
        <div id="summary" class="summary"></div>
      </section>

      <section class="panel">
        <div class="panel-head">
          <h2>Шаг 3. Контакты клиента</h2>
        </div>
        <form id="leadForm" class="grid-2">
          <label>
            Имя клиента
            <input id="customerName" required placeholder="Например: Анна" />
          </label>
          <label>
            Telegram клиента
            <input id="customerTelegram" required placeholder="@username или t.me/..." />
          </label>
          <label>
            Дата поездки
            <input id="travelDate" type="date" />
          </label>
          <label>
            Количество людей
            <input id="customerPeople" type="number" min="1" max="20" value="2" />
          </label>
          <label class="full">
            Комментарий клиента
            <textarea
              id="customerNote"
              rows="3"
              placeholder="Пожелания: дети, рассвет, пляж, без долгих подъемов..."
            ></textarea>
          </label>
          <button id="leadSubmitBtn" type="submit" class="btn" disabled>
            Отправить заявку
          </button>
        </form>
        <p id="availabilityHint" class="small"></p>
        <p id="leadSubmitHint" class="small"></p>
        <p id="leadResult" class="small notice"></p>
      </section>
    </main>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="./app.js"></script>
  </body>
</html>
